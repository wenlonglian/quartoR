(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{509:function(t,e){!function(t){var e={DOI:"",widgetContainer:null,widgetContainerContent:null,selectors:{CONTAINER:".federated-access-login",LOADER:".federated-access-login__loading",CONTENT:".federated-access-login__content",CURRENT_URL_INPUT:'[name="federatedAccessLoginCurrentURL"]'},htmlMarkups:{},ACTION_URL:"",MAX_TITLE_LENGTH:32,init:function init(){var t;this.DOI=null===(t=document.querySelector('[scheme="doi"]'))||void 0===t?void 0:t.getAttribute("content");var e=this.DOI?"article-access-seamless":"access-seamless";if(this.widgetContainer=document.querySelector(this.selectors.CONTAINER),this.widgetLoader=document.querySelector(this.selectors.LOADER),this.widgetContent=document.querySelector(this.selectors.CONTENT),this.widgetContainer&&this.widgetLoader){var i,n=(null===(i=document.querySelector(this.selectors.CURRENT_URL_INPUT))||void 0===i?void 0:i.value)||window.location.href,s=new URL(n),a=this.DOI?s.pathname:s.searchParams.get("uri");this.ACTION_URL="/action/ssostart?redirectUri=".concat(s.origin).concat(a||""),this.htmlMarkups.empty="<div class='federated-access-login__empty'><p>Access journal content via a university, library or employer subscription.</p><div class='text-center'><a href='".concat(this.ACTION_URL,"' class='btn btn-primary btn--institution-login' role='button' data-id='").concat(e,"'><i aria-hidden='true'></i><em aria-hidden='true'></em><span><strong>Access through your institution</strong></span></a></div></div>"),this.htmlMarkups[1001]="<div class='federated-access-login__1001'><p>Access via <strong>{{institutionName}}</strong> is not available as they do not subscribe to Sage Journals content.</p><div class='text-center'><p><a href='".concat(this.ACTION_URL,"' class='federated-access-login__edit-institution' data-id='access-seamless-addchange'><i aria-hidden='true' class='icon-pencil'></i><span>Add or change institution</span></a></p></div></div>"),this.htmlMarkups[1002]="<div class='federated-access-login__1002'><p><strong>{{institutionName}}</strong> does not have access to this article.</p><div class='text-center'><p><a href='".concat(this.ACTION_URL,"' class='federated-access-login__edit-institution' data-id='access-seamless-addchange'><i aria-hidden='true' class='icon-pencil'></i><span>Add or change institution</span></a></p></div></div>"),this.htmlMarkups[1003]="<div class='federated-access-login__1003'><p>Access journal content via a university, library or employer subscription.</p><div class='text-center'><a href='{{entitySsoUrl}}' class='btn btn-primary btn--institution-login' role='button' data-id='".concat(e,"'><i aria-hidden='true'></i><em aria-hidden='true'></em><span>Access through <strong>{{institutionName}}</strong></span></a><p><a href='").concat(this.ACTION_URL,"' class='federated-access-login__edit-institution' data-id='access-seamless-addchange'><i aria-hidden='true' class='icon-pencil'></i><span>Add or change institution</span></a></p></div></div>"),this.control()}},control:function control(){var t=this;if(t.DOI)try{SeamlessAccessService.getEntitiesWithAllInfo(t.DOI).then(t.onFulfilled,t.onRejected)}catch(t){console.error("SeamlessAccessService is not imported...")}else try{SeamlessAccessService.retrieveEntity().then((function(i){if(i.length>0){var n=i[i.length-1],s="/pb/widgets/shibboleth/sage/checkSupportedInstitution?entityid=".concat(n.entity.entityID);$.ajax({type:"GET",url:s,accept:{text:"application/json"},timeout:SeamlessAccessService.timeout,success:function success(i){(i={entityID:n.entity.entityID,entityTitle:n.entity.title,entityStatusObj:JSON.parse("string"!=typeof i?JSON.stringify(i):i).supported,entitySsoUrl:SeamlessAccessService.getWAYFLessUrl(n.entity.entityID)}).entityTitle.length>e.MAX_TITLE_LENGTH&&(i.entityTitle=i.entityTitle.slice(0,e.MAX_TITLE_LENGTH)+"...");var s="";i.entityStatusObj?(s=t.htmlMarkups[1003].replace("{{entitySsoUrl}}",i.entitySsoUrl).replace("{{institutionName}}",i.entityTitle),t.widgetContent.innerHTML=s):(s=t.htmlMarkups[1001].replace("{{entitySsoUrl}}",i.entitySsoUrl).replace("{{institutionName}}",i.entityTitle),t.widgetContent.innerHTML=s)},error:function error(e){t.widgetContent.innerHTML=t.htmlMarkups.empty}})}else t.widgetContent.innerHTML=t.htmlMarkups.empty}))}catch(t){console.error("SeamlessAccessService is not imported...")}},onFulfilled:function onFulfilled(t){var i,n="empty",s={};if(t.length>0){for(var a,c=t.length-1;c>=0;c--)if(1003===t[c].entityStatusObj.code){a=t[c];break}n=(s=null!=a?a:t[t.length-1]).entityStatusObj.code}(null===(i=s.entityTitle)||void 0===i?void 0:i.length)>e.MAX_TITLE_LENGTH&&(s.entityTitle=s.entityTitle.slice(0,e.MAX_TITLE_LENGTH)+"..."),e.widgetContent.innerHTML=e.htmlMarkups[n].replace("{{entitySsoUrl}}",s.entitySsoUrl).replace("{{institutionName}}",s.entityTitle)},onRejected:function onRejected(t){e.widgetContent.innerHTML=e.htmlMarkups.empty,console.warn(t)}};t.federatedAccessLogin=e}(UX)}}]);