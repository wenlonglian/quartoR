(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{467:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return S}));var n=i(3),s=i.n(n),o=i(4),a=i.n(o),c=i(5),l=i.n(c),r=i(2),u=i.n(r),f=i(6),E=i.n(f);function _callSuper(t,e,i){return e=u()(e),l()(t,function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function _isNativeReflectConstruct(){return!!t}()}()?Reflect.construct(e,i||[],u()(t).constructor):e.apply(t,i))}var S=function(t){function InstitutionalAffiliations(){var t;return s()(this,InstitutionalAffiliations),(t=_callSuper(this,InstitutionalAffiliations)).widget=document.querySelector(t.selectors.WIDGET_CONTAINER),t.widget&&t.initialize(),t}return E()(InstitutionalAffiliations,t),a()(InstitutionalAffiliations,[{key:"selectors",get:function get(){return{WIDGET_CONTAINER:".remote_institutional_access",REMOVE_BUTTON:".js--remove-affiliation",SUCCESS_MESSAGE:".success-message",ERROR_MESSAGE:".error",SECTION:".section"}}},{key:"classList",get:function get(){return{SUCCESS:"success",ERROR:"error",DISPLAY_NONE:"d-none"}}},{key:"initialize",value:function initialize(){this.REMOVE_URL="/action/deleteInstitutionalAffiliation",this.control()}},{key:"control",value:function control(){this.removeButtons=this.widget.querySelectorAll(this.selectors.REMOVE_BUTTON),$(this.removeButtons).on("click",this.onRemoveButtonClickHandler.bind(this))}},{key:"onRemoveButtonClickHandler",value:function onRemoveButtonClickHandler(t){var e=t.currentTarget,i=e.dataset.uuid,n=e.dataset.type,s=this,o=s.widget.querySelector(s._selectors.SUCCESS_MESSAGE),a=s.widget.querySelector(s._selectors.ERROR_MESSAGE),c=e.closest(this._selectors.SECTION);o.classList.add(s._classList.DISPLAY_NONE),a.classList.add(s._classList.DISPLAY_NONE),$.ajax({url:this.REMOVE_URL,type:"POST",data:{institutionUuid:i,affiliationType:n},success:function handelSuccessResponse(t){t&&(o.classList.remove(s._classList.DISPLAY_NONE),o.querySelector("span").innerText=t.message,c.remove())},error:function handleBadRequest(t,e,i){a.classList.remove(s._classList.DISPLAY_NONE),a.innerText="Institutional affiliation has not been deleted"}})}}]),InstitutionalAffiliations}(i(8).a)}}]);