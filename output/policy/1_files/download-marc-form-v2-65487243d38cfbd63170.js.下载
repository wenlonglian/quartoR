(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{469:function(e,a,i){"use strict";i.r(a),i.d(a,"default",(function(){return d}));var t=i(3),n=i.n(t),r=i(4),l=i.n(r),d=function(){function DownloadMarcForm(e){n()(this,DownloadMarcForm),this._format=void 0,this._type=void 0,this._recipient=void 0,this.form=e,this.init()}return l()(DownloadMarcForm,[{key:"init",value:function init(){this.reportFields(),this.formatFields(),this.recipientFields(),this.formSubmit()}},{key:"_convertToArray",value:function _convertToArray(e){return e?Array.prototype.slice.call(e):[]}},{key:"reportFields",value:function reportFields(){var e=this;this._convertToArray(this.form.report).forEach((function(a){return a.addEventListener("change",e._handleTypeRadioChange.bind(e))}))}},{key:"_handleTypeRadioChange",value:function _handleTypeRadioChange(e){this._type={allJournals:"all Journals",allBooks:"all Books",allSubscribedJournals:"all Subscribed Journals",allPurchasedBooks:"all Purchased Books",isbn_list:"ISBN List"}[e.currentTarget.id],this._handleISBNTextarea(e.currentTarget),this._handleDateRange(e.currentTarget)}},{key:"_handleISBNTextarea",value:function _handleISBNTextarea(e){var a=this.form,i=a.isbn_list,t=a.isbn,n=a.report_isbnList;n&&(i===e?(n.classList.remove("hidden"),t.disabled=!1,t.focus()):(n.classList.add("hidden"),t.disabled=!0))}},{key:"_handleDateRange",value:function _handleDateRange(e){var a=this.form,i=a.allBooks,t=a.allPurchasedBooks,n=a.report_period,r=a["start-date"],l=a["end-date"];n&&(i===e||t===e?(n.classList.remove("hidden"),r.disabled=!1,l.disabled=!1):(n.classList.add("hidden"),r.disabled=!0,l.disabled=!0))}},{key:"formatFields",value:function formatFields(){var e=this;this._convertToArray(this.form.format).forEach((function(a){return a.addEventListener("change",e._handleFormatRadioChange.bind(e))}))}},{key:"_handleFormatRadioChange",value:function _handleFormatRadioChange(e){this._format={marc:"MARC",xml:"XML"}[e.currentTarget.id]}},{key:"recipientFields",value:function recipientFields(){var e=this;this._convertToArray(this.form.recipient).forEach((function(a){return a.addEventListener("change",e._handleEmailRadioChange.bind(e))}));this.form.userEmail.addEventListener("keyup",(function recipientUpdateValue(a){var i=e.form,t=i.userInput,n=i.userEmail,r=i.email;t.checked&&(r.value=n.value),e._recipient=a.target.value}))}},{key:"_handleEmailFields",value:function _handleEmailFields(e){var a=this.form,i=a.userInput,t=a.email,n=a.userEmail;i===e?(n.disabled=!1,n.focus(),t.value=n.value):(n.disabled=!0,t.value=e.value)}},{key:"_handleEmailRadioChange",value:function _handleEmailRadioChange(e){var a={userInput:this.form.userEmail.value,allAdmins:"all Administrators"};this._recipient=a[e.currentTarget.id],this._handleEmailFields(e.currentTarget)}},{key:"formSubmit",value:function formSubmit(){this.form.addEventListener("submit",this._handleSubmit.bind(this))}},{key:"_handleSubmit",value:function _handleSubmit(){var e=this.form,a=e.isbn,i=e.recipient,t=e.userEmail;a.value=a.value.replace(/\r\n/g,"\n").split("\n").toString(),i[0].disabled="disabled",i[1].disabled="disabled",t.disabled="disabled"}}]),DownloadMarcForm}()}}]);